(()=>{var e=document.getElementById("canvas"),t=e.getContext("2d"),n=!1,o=!1,a=document.createElement("canvas"),c=a.getContext("2d"),i=[],r={x:0,y:0,dx:0,dy:0,px:0,py:0},l={scatter:0,gravity:.2,consistency:.04,pollock:!1,burst:!0,shade:!0};function h(){n&&requestAnimationFrame(h),t.clearRect(0,0,e.width,e.height),function(e){for(var n=e.length;n--;){var o=e[n],i=o.x,r=o.y,h=o.size;d(i,r,h,t),o.dy-=l.gravity,o.x-=o.dx,o.y-=o.dy,o.size-=.05,(e[n].size<.3||Math.random()<l.consistency)&&(d(i,r,h,c),e.splice(n,1))}t.drawImage(a,0,0)}(i)}function s(e,t,n){for(var o=0;o<30;o++){var a=Math.random()*Math.PI,c=(Math.random()<.5?3:-3)*(3*Math.random())*l.scatter,i=(Math.random()<.5?3:-3)*(3*Math.random())*l.scatter;n.push({x:e,y:t,dx:c+r.dx,dy:i+r.dy,size:a})}}function d(e,t,n,o){o.beginPath(),o.arc(e,t,5*n,0,2*Math.PI,!1),o.fill(),o.closePath()}e.width=a.width=window.innerWidth,e.height=a.height=window.innerHeight,c.fillStyle=t.fillStyle="#aa0707",e.onmousedown=function(e){if(y.style.display="none",n){o=!0,l.burst&&setTimeout((function(){o=!1}),100),r.x=e.pageX,r.y=e.pageY;var a=l.shade?"rgb("+(130+(105*Math.random()|0))+",0,0)":"#aa0707",d="#"+Math.floor(16777215*Math.random()).toString(16);c.fillStyle=t.fillStyle=l.pollock?d:a,s(r.x,r.y,i)}else n=!0,h()},e.onmouseup=function(){o=!1,r.dx=r.dy=0},e.onmousemove=function(e){if(o){var t=r.px-r.x,n=r.py-r.y;s((r={x:e.pageX,y:e.pageY,dx:Math.abs(t)>10?-1:t,dy:Math.abs(n)>10?-1:n,px:r.x,py:r.y}).x,r.y,i)}},window.onblur=function(){n=!1};var u=document.querySelector("form"),y=u.querySelector(".download");u.reset(),u.onsubmit=function(e){e.preventDefault()},u.querySelector(".clear").onclick=function(){c.clearRect(0,0,e.width,e.height)},u.querySelector(".save").onclick=function(t){y.href=e.toDataURL(),y.style.display="inline"},u.querySelector(".scatter").onchange=function(){l.scatter=this.value/100||0},u.querySelector(".gravity").onchange=function(){l.gravity=this.value/100||0},u.querySelector(".consistency").onchange=function(){l.consistency=this.value/100||0},u.querySelector(".pollock").onchange=function(){l.pollock=this.checked},u.querySelector(".burst").onchange=function(){l.burst=this.checked},u.querySelector(".shade").onchange=function(){l.shade=this.checked}})();